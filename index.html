<!DOCTYPE html>
<html>

<head>
  <title>Chess</title>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2"
    crossorigin="anonymous"></script>

  <link rel="stylesheet" href="/static/css/chessboard-1.0.0.min.css">
</head>

<body>
  <input name="next_move" type="text" placeholder="Next move" />

  <div id="board" style="width: 700px"></div>
  <button id="startBtn">Start</button>

  <div id="position"></div>

  <script src="/static/js/chessboard-1.0.0.min.js"></script>
  <script lang="javascript">
    function onDrop(source, target, piece, newPos, oldPos, orientation) {
      // new and old FEN chess position
      const newPosFen = Chessboard.objToFen(newPos);
      const oldPosFen = Chessboard.objToFen(oldPos); 

      console.log('Source: ' + source);
      console.log('Target: ' + target);
      console.log('Piece: ' + piece);
      console.log('New position: ' + newPosFen);
      console.log('Old position: ' + oldPosFen);
      console.log('Orientation: ' + orientation);
      console.log('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~');

      // append current fen position to #position div  
      const posDiv = document.getElementById('position');
      const position = document.createTextNode(newPosFen + ',');
      posDiv.appendChild(position);
    }

    const board = Chessboard('board', {
      draggable: true,
      orientation: 'white',
      onDrop: onDrop,
      position: 'start'
    });

    $('#startBtn').on('click', board.start);
  </script>
</body>

</html>